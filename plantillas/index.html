<!DOCTYPE html><style>body{background:linear-gradient(180deg,#041a2d,#031322);color:#fff;font-family:Inter,system-ui,sans-serif}h1[data-astro-cid-lhgrhwby]{font-size:1.9rem;letter-spacing:.5px}#search[data-astro-cid-lhgrhwby]{width:640px;padding:12px 16px;border-radius:10px;border:none;outline:none;background:#0b2a45;color:#fff;font-size:14px;box-shadow:inset 0 0 0 1px #1e4c7a}#search[data-astro-cid-lhgrhwby]::placeholder{color:#9fb9d3}table[data-astro-cid-lhgrhwby]{width:100%;border-collapse:separate;border-spacing:0 6px;table-layout:fixed}thead[data-astro-cid-lhgrhwby] th[data-astro-cid-lhgrhwby]{font-size:13px;font-weight:600;color:#9fd3ff;text-align:left;padding:10px 14px;white-space:nowrap}tbody[data-astro-cid-lhgrhwby] tr[data-astro-cid-lhgrhwby]{background:#ffffff08;transition:.2s}tbody[data-astro-cid-lhgrhwby] tr[data-astro-cid-lhgrhwby]:hover{background:#5096ff1f}td[data-astro-cid-lhgrhwby]{position:relative;padding:14px 16px;font-size:13.5px;line-height:1.5;vertical-align:top;word-break:break-word;white-space:normal;overflow:hidden}tbody[data-astro-cid-lhgrhwby] td[data-astro-cid-lhgrhwby]{border-bottom:1px solid rgba(255,255,255,.12)}tbody[data-astro-cid-lhgrhwby] tr[data-astro-cid-lhgrhwby]:last-child td[data-astro-cid-lhgrhwby]{border-bottom:none}td[data-astro-cid-lhgrhwby]:not(:last-child):after{content:"";position:absolute;right:0;top:15%;width:1px;height:70%;background:#ffffff14}tbody[data-astro-cid-lhgrhwby] tr[data-astro-cid-lhgrhwby]:hover td[data-astro-cid-lhgrhwby]{border-bottom:1px solid rgba(120,180,255,.45)}th[data-astro-cid-lhgrhwby]:nth-child(1),td[data-astro-cid-lhgrhwby]:nth-child(1){width:110px}th[data-astro-cid-lhgrhwby]:nth-child(2),td[data-astro-cid-lhgrhwby]:nth-child(2){width:160px}th[data-astro-cid-lhgrhwby]:nth-child(3),td[data-astro-cid-lhgrhwby]:nth-child(3){width:340px}th[data-astro-cid-lhgrhwby]:nth-child(4),td[data-astro-cid-lhgrhwby]:nth-child(4){width:520px}th[data-astro-cid-lhgrhwby]:nth-child(5),td[data-astro-cid-lhgrhwby]:nth-child(5){width:300px}mark[data-astro-cid-lhgrhwby]{background:#ffd54f;color:#000;padding:2px 4px;border-radius:4px}.compact[data-astro-cid-lhgrhwby] td[data-astro-cid-lhgrhwby]{padding:10px 14px;font-size:13px}
.sidebar[data-astro-cid-ssfzsv2f]{width:220px;background:linear-gradient(180deg,#0f172a,#020617);color:#fff;padding:20px;position:sticky;top:0;height:100vh}.sidebar[data-astro-cid-ssfzsv2f] h2[data-astro-cid-ssfzsv2f]{margin-bottom:20px;font-size:22px}.sidebar[data-astro-cid-ssfzsv2f] a[data-astro-cid-ssfzsv2f]{display:block;padding:10px 12px;margin-bottom:8px;color:#cbd5e1;text-decoration:none;border-radius:8px;transition:.2s}a[data-astro-cid-ssfzsv2f]{border-radius:8px}a[data-astro-cid-ssfzsv2f]:hover{background:#ffffff14}.sidebar[data-astro-cid-ssfzsv2f] a[data-astro-cid-ssfzsv2f]:hover{background:#1e293b;color:#fff}@media(max-width:768px){.sidebar[data-astro-cid-ssfzsv2f]{position:fixed;left:-220px;transition:.3s}.sidebar[data-astro-cid-ssfzsv2f].open{left:0}}.app[data-astro-cid-kqx5um5x]{display:flex;min-height:100vh}body{margin:0;background:#0b1c2d;color:#fff;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.content[data-astro-cid-kqx5um5x]{flex:1;padding:24px;overflow-x:auto}
</style><div class="app" data-astro-cid-kqx5um5x> <nav class="sidebar" data-astro-cid-ssfzsv2f> <h2 data-astro-cid-ssfzsv2f>Sistema</h2> <a href="/plantillas-system/plantillas" data-astro-cid-ssfzsv2f> Plantillas</a> <a href="/plantillas-system/speech" data-astro-cid-ssfzsv2f> Speech</a> <a href="/plantillas-system/consultas" data-astro-cid-ssfzsv2f> Consultas</a> </nav>  <main class="content" data-astro-cid-kqx5um5x>  <section class="p-6 text-white" data-astro-cid-lhgrhwby> <h1 class="text-2xl font-bold mb-4" data-astro-cid-lhgrhwby>Plantillas</h1> <input id="search" placeholder="Buscar plantillas..." class="px-3 py-2 rounded text-black w-[300px]" data-astro-cid-lhgrhwby> <p class="mt-2 text-sm" data-astro-cid-lhgrhwby>
Resultados: <span id="count" data-astro-cid-lhgrhwby>0</span> </p> <div class="overflow-x-auto mt-4" data-astro-cid-lhgrhwby> <table class="w-full border-collapse" data-astro-cid-lhgrhwby> <thead data-astro-cid-lhgrhwby> <tr class="bg-slate-800 text-left" data-astro-cid-lhgrhwby> <th class="p-2" data-astro-cid-lhgrhwby>Aplicativo</th> <th class="p-2" data-astro-cid-lhgrhwby>Solicitud</th> <th class="p-2" data-astro-cid-lhgrhwby>Servicio</th> <th class="p-2" data-astro-cid-lhgrhwby>Resumen</th> <th class="p-2" data-astro-cid-lhgrhwby>Cierre</th> </tr> </thead> <tbody id="body" data-astro-cid-lhgrhwby></tbody> </table> </div> </section>  <div id="modal" class="fixed inset-0 hidden bg-black/60 flex items-center justify-center z-50" data-astro-cid-lhgrhwby> <div class="bg-slate-900 text-white p-6 rounded-xl w-[600px] shadow-xl" data-astro-cid-lhgrhwby> <div id="modalContent" class="space-y-2 text-sm" data-astro-cid-lhgrhwby></div> <div class="mt-4 text-right" data-astro-cid-lhgrhwby> <button id="closeBtn" class="px-4 py-2 bg-blue-600 rounded hover:bg-blue-700" data-astro-cid-lhgrhwby></button> </div> </div> </div>  <script>
    const input = document.getElementById("search");
    const body = document.getElementById("body");
    const count = document.getElementById("count");
    //const modal = document.getElementById("modal");
    //const modalContent = document.getElementById("modalContent");
    //const closeBtn = document.getElementById("closeBtn");

    let cache = [];

    function highlight(text, q) {
      if (!q) return text;
      const reg = new RegExp(`(${q})`, "gi");
      return text.replace(reg, "<mark>$1</mark>");
    }

    async function load(q = "") {
      if (!cache.length) {
        const res = await fetch(`/plantillas-system/api/plantillas`);
        cache = await res.json();
      }

      const query = q.toLowerCase();

      const filtered = cache.filter(p =>
        Object.values(p).some(v =>
          String(v).toLowerCase().includes(query)
        )
      );

      count.textContent = filtered.length;

      body.innerHTML = filtered.map((p, i) => `
        <tr data-index="${i}" class="row cursor-pointer">
          <td class="font-semibold">${highlight(p.aplicativo ?? "", q)}</td>
          <td>${highlight(p.solicitud ?? "", q)}</td>
          <td>${highlight(p.servicio ?? "", q)}</td>
          <td>${highlight(p.resumen ?? "", q)}</td>
          <td class="text-blue-300">${highlight(p.cierre ?? "", q)}</td>
        </tr>
      `).join("");

      document.querySelectorAll(".row").forEach(row => {
        row.addEventListener("click", () => {
          openModal(filtered[row.dataset.index]);
        });
      });
    }

    closeBtn.addEventListener("click", () => {
      modal.classList.add("hidden");
    });

    input.addEventListener("input", e => load(e.target.value));

    load();
  </script>  </main> </div> 